---
toc: true
title:  "[Kotlin] data classì˜ copy() with backing field"
last_modified_at:   2024-10-05
categories : Project
excerpt: "backing fieldëŠ” copy()ë¡œ ë‹¹ì—°íˆ! ë³µì‚¬ë˜ì§€ ì•ŠëŠ”ë‹¤!"
image: ""
sitemap :
  changefreq : weekly
  priority : 1.0
use_math: true
published: true
---

## ë¬¸ì œ ìƒí™©
data classì˜ `copy()`ë¥¼ í†µí•´ì„œ ê°ì²´ê°€ ê°€ì§„ ê°’ì„ ì•„ì£¼ í¸ë¦¬í•˜ê²Œ ê·¸ëŒ€ë¡œ ê°€ì ¸ì˜¤ê³  ì›í•˜ëŠ” ê°’ì„ ì„¤ì •í•´ì¤„ ìˆ˜ ìˆë‹¤. <br>
ì‘ì—…í–ˆë˜ ë¡œì§ì—ì„œëŠ” ì¼ë ¨ì˜ ë‹¨ê³„ë¥¼ ê±°ì¹˜ë©´ì„œ ê°ì²´ì˜ ê°’ì„ ì—…ë°ì´íŠ¸ í•´ì£¼ê³  ìˆì—ˆëŠ”ë°, ì´ ê³¼ì •ì—ì„œ `copy()`ë¥¼ ë¬´ì§„ì¥ ì“°ê³ ìˆì—ˆë‹¤. <br>
í´ë˜ìŠ¤ì—ì„œëŠ” backing fieldë¥¼ ê°–ê³  ìˆëŠ” ìƒí™©ì´ì—ˆê³ , ê°ì²´ë¥¼ ìƒì„±ìë¡œ ë°”ë¡œ ìƒì„±í•˜ì§€ ì•Šê³  `of()`ë¡œ ìƒì„±í•´ì£¼ì—ˆì—ˆë‹¤. <br>
```kotlin
data class Member(
    val id: Long,
    val name: String,
) {
    var nickName: String = ""
        private set
    
    companion object {
        fun of(id: Long, name: String, nickName: String): Member {
            return Member(id, name).apply {
                this.nickName = nickName
            }
        }
    }
}
```

ê·¼ë° ìµœì¢… ì‘ë‹µìœ¼ë¡œ ë‚˜ê°€ëŠ” ê°ì²´ì—ì„œ backing field ê°’ì´ ëˆ„ë½ëë‹¤ëŠ” ì œë³´ë¥¼ ë°›ê³ .. ì—´ì‹¬íˆ ì›ì¸ì„ ì¶”ì í•´ë´¤ë‹¤ğŸ˜‡ <br>
ë‹¹ì‹œ ë¡œì§ì€ ëŒ€ëµ ì´ëŸ° ìƒí™©ì´ì—ˆë‹¤. ë¡œì§ì´ ê¸¸ì–´ì§€ë‹¤ë³´ë‹ˆê¹Œ ì½”ë“œë§Œìœ¼ë¡œ ì›ì¸ì„ ì°¾ê¸° í˜ë“¤ì—ˆê³  ë¡œê·¸ë¥¼ ë‚¨ê²¨ë³´ë©° ì›ì¸ì„ ì¢í˜€ë‚˜ê°€ë´¤ë‹¤.<br>
```kotlin
val member = Member.of(1L, "AAA", "nickName")

// -- ë³µì¡í•œ ë¡œì§.. --

member.copy(name = "BBB").also {
    // -- ìƒëµ --
}

// -- ë³µì¡í•œ ë¡œì§2.. --
// ê·¼ë° backing field(nickName) ê°’ì´ ì—†ìŒ..ğŸ¥²
```
<br>

ëˆˆì¹˜ ë¹ ë¥¸ ë¶„ë“¤ì€ ì´ë¯¸ ì›ì¸ì„ ì•Œì•„ì±˜ê² ì§€ë§Œ, copy()ì˜ also ìª½ì„ ë³´ë©´ **backing fieldë¥¼ ì´ˆê¸°í™”í•´ì£¼ëŠ” ë‚´ìš©ì´ ì—†ë‹¤!**<br>
ì •ë§ì •ë§ ë°”ë³´ê°™ì€ ë¡œì§ì´ì—ˆë‹¤ğŸ¥²
```kotlin
val member = Member.of(1L, "AAA", "nickName")

// -- ë³µì¡í•œ ë¡œì§.. --

member.copy(name = "BBB").also {
    // ğŸš¨ backing field ì´ˆê¸°í™” ì•ˆí•´ì£¼ê³  ìˆì—ˆìŒ!! ğŸš¨
}

// -- ë³µì¡í•œ ë¡œì§2.. --
// ê·¼ë° backing field(nickName) ê°’ì´ ì—†ìŒ..ğŸ¥²
```

## í•´ê²°ë°©ë²• 2ê°€ì§€
`copy().also { ... }`ì—ì„œ alsoì— ì´ˆê¸°í™”í•´ì£¼ëŠ” ë‚´ìš©ì„ ëª¨ë‘ ì¶”ê°€í•´ì£¼ë©´ ë¬¼ë¡  í•´ê²°ë˜ê² ì§€ë§Œ, ì´ê±´ ì¶”í›„ ìˆ˜ì •ì‚¬í•­ì´ ìˆê²Œë˜ë©´
ë°˜ì˜ëœ ë¶€ë¶„ì„ ë‹¤ ì°¾ì•„ì„œ ìˆ˜ì •í•´ì¤˜ì•¼ í•œë‹¤. ì‹¤ìˆ˜í•˜ë©´ ë˜ ì¥ì• ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ìƒí™©ì— ë§ì¶° ì•„ë˜ 2ê°€ì§€ ë°©ë²• ì¤‘ì— ì„ íƒí•˜ë©´ ë˜ê² ë‹¤.<br>

### backing fieldë„ ìƒì„±ìì— ë„£ì–´ì£¼ê¸°
ê°€ì¥ ê°„ë‹¨í•œ ë°©ë²•ì´ë‹¤. í•˜ì§€ë§Œ backing fieldë¡œ ë¹¼ë‘” ì˜ë„ê°€ ìˆì„í…Œë‹ˆê¹Œ ìœ ìš©í•˜ì§„ ì•Šì„ ê²ƒ ê°™ë‹¤.
```kotlin
data class Member(
    val id: Long,
    val name: String,
    val nickName: String = "",
)
```
<br>

### copy() ì—­í•  ë©”ì†Œë“œ ìƒˆë¡œ ë§Œë“¤ê¸°
backing field ê¹Œì§€ ë³µì‚¬í•˜ëŠ” **fullCopy()**ë¥¼ ì •ì˜í•´ì£¼ì! <br>
```kotlin
data class Member(
    val id: Long,
    val name: String,
) {
    var nickName: String = ""
        private set

    fun fullCopy(name: String): Member {
        return this.copy(name = name).also {
            it.nickName = this.nickName
        }
    }

    companion object {
        fun of(id: Long, name: String, nickName: String): Member {
            return Member(id, name).apply {
                this.nickName = nickName
            }
        }
    }
}
```
<br>

í…ŒìŠ¤íŠ¸ë„ ë¬¸ì œì—†ì´ í†µê³¼í•œë‹¤!<br>
```kotlin
@Test
fun `fullCopy()ëŠ” backing fieldë¥¼ ë³µì‚¬í•  ìˆ˜ ìˆë‹¤`() {
    val member = Member.of(1L, "AAA", "nickName")
    member.fullCopy("BBB").also {
        assertEquals("nickName", it.nickName) // success
    }
}
```